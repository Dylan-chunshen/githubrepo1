var g_path="/js-library/easyui-common/gov/";var oup_service="gov.adapter.oup.wegov.WegovService";$(function(){load_easyui_gov()});function reload_easyui_gov(a){var b=null==a?$(document.body):$(a);b.find("select.select-wad-code").each(function(c){var d=$(this).attr("tcode");$(this).commonCombo({treeAction:g_path+"select/selectWadTreeAction.jsp?tcode="+d,textAction:g_path+"select/selectWadCodeNameAction.jsp?tcode="+d,selectAction:g_path+"select/selectWadAction.jsp?tcode="+d})});b.find("select.commonCombo").each(function(c){$(this).commonCombo({selectAction:$(this).attr("selectAction")})});b.find("select.select-remote-wad-code").each(function(c){var d=$(this).attr("tcode");$(this).remoteComboTree({treeAction:g_path+"select/remoteSelectWadTreeAction.jsp?tcode="+d,textAction:g_path+"select/remoteSelectWadCodeNameAction.jsp?tcode="+d})});b.find("select.select-suborg").each(function(d){var c=$(this).attr("orgId");if(!c){c=""}$(this).commonCombo({treeAction:g_path+"select/selectOrgTreeAction.jsp?oup_service="+oup_service+"&orgId="+c,textAction:g_path+"select/selectOrgNameAction.jsp?oup_service="+oup_service,selectAction:g_path+"select/selectOrgAction.jsp?oup_service="+oup_service+"&orgId="+c})});b.find("select.select-demo-code").each(function(c){var d=$(this).attr("tcode");$(this).commonCombo({treeAction:g_path+"select/selectDemoDicAction.jsp?tcode="+d,textAction:"",selectAction:g_path+"select/selectDemoDicAction.jsp?tcode="+d})})}function load_easyui_gov(a){$("select.select-wad-code",a).each(function(b){var c=$(this).attr("tcode");$(this).commonCombo({treeAction:g_path+"select/selectWadTreeAction.jsp?tcode="+c,textAction:g_path+"select/selectWadCodeNameAction.jsp?tcode="+c,selectAction:g_path+"select/selectWadAction.jsp?tcode="+c})});$("select.commonCombo",a).each(function(b){$(this).commonCombo({selectAction:$(this).attr("selectAction")})});$("select.select-remote-wad-code",a).each(function(b){var c=$(this).attr("tcode");$(this).remoteComboTree({treeAction:g_path+"select/remoteSelectWadTreeAction.jsp?tcode="+c,textAction:g_path+"select/remoteSelectWadCodeNameAction.jsp?tcode="+c})});$("select.select-suborg",a).each(function(c){var b=$(this).attr("orgId");if(!b){b=""}$(this).commonCombo({treeAction:g_path+"select/selectOrgTreeAction.jsp?oup_service="+oup_service+"&orgId="+b,textAction:g_path+"select/selectOrgNameAction.jsp?oup_service="+oup_service,selectAction:g_path+"select/selectOrgAction.jsp?oup_service="+oup_service+"&orgId="+b})});$("select.select-demo-code",a).each(function(b){var c=$(this).attr("tcode");$(this).commonCombo({treeAction:g_path+"select/selectDemoDicAction.jsp?tcode="+c,textAction:"",selectAction:g_path+"select/selectDemoDicAction.jsp?tcode="+c})})}function gotoFirstPage(a){a.datagrid("options").pageNumber=1;a.datagrid("getPager").pagination({pageNumber:1})}(function(d){function h(r){var p=r.attr("freeInput");if(p&&p=="true"){return}var q=false;var m=r.combobox("options")["textField"];var s=r.combobox("getText");var l=r.combobox("getData");for(var o=0;o<l.length;o++){if(s==l[o][m]){return}}if(q==false){r.combobox("setText","");r.combobox("setValue","")}var n=d(r).parent().find(".combo-value").val();if(null==n||""==n){r.next().children()[0].value=""}}function g(m){var l=d(m).parent().find(".combo-value").val();if(null==l||""==l){m.next().children()[0].value=""}}function f(m){var l=m.attr("textName");if(l){m.next().children()[0].setAttribute("name",l)}}function a(l){var m=l.attr("readOnly");if(m!=null&&m!="false"){l.next().children()[0].setAttribute("readOnly","true");d(l.next().children()[0]).css({color:"#aaaaaa"});l.next().children()[1].children[0].disabled="true"}}function c(l){d(l.next().children()[0]).attr("readOnly","false");d(l.next().children()[0]).css("color","");if(l.next().children()[1]){d(l.next().children()[1].children[0]).removeAttr("disabled")}}function e(l){l.next().children()[0].setAttribute("enable_blank",l.attr("enable_blank"));l.next().children()[0].setAttribute("displayName",l.attr("displayName"))}function b(m){var l=m.parent().width();var n=m.css("width");if(n.indexOf("%")!=-1){n=l*parseFloat(n)/100}else{if(n.indexOf("px")!=-1){n=n.replace("px","")}}return n}function i(o,n){var l=o.attr("defaultValue");var m=o.attr("defaultText");if(!l){return}o.combotree("setValue",l);if(m){o.combotree("setText",m);return}d.ajax({type:"POST",url:n+"&defaultValue="+l,success:function(q){var p=jQuery.trim(q);o.combotree("setText",p);o.attr("defaultText",p)}})}function k(l,n){if(null==n){return true}if(""==n.id&&null==n.attributes){return true}var m=n.attributes.leaf;if(m=="false"){return false}else{return true}}d.fn.commonCombo=function(w,v){var t=this.attr("tree");var s=this;if(t=="true"){if(typeof w=="string"){var u=d.fn.commonCombo.methods[w];if(u){return u(this,v)}else{return this.combotree(w,v)}}var p=w.treeAction;var o=w.textAction;var n=this.attr("exclude");if(n!=null&&n!=""){if(p&&p.indexOf("?")==-1){p+="?"}p+="&exclude="+n}var m;var y={url:p,hasNullOpt:true,width:b(this),onBlur:function(){g(s)},onExpand:function(){var z=s.combotree("getValue");if(z==s.attr("defaultValue")){i(s,o)}},onLoadSuccess:function(z,A){if(z==null){i(s,o)}j(s)},onBeforeSelect:function(z){var A=z.attributes.allowSelected;if(A=="true"){return true}return k(s,z)},onBeforeLoad:function(A,z){if(A){z.queryKey=A.attributes.queryKey}}};var r=d.extend(w,y);this.combotree(r,v)}else{if(typeof w=="string"){var u=d.fn.commonCombo.methods[w];if(u){return u(this,v)}else{return this.combobox(w,v)}}var x=w.selectAction;var n=this.attr("exclude");if(n!=null&&n!=""){if(x.indexOf("?")==-1){x+="?"}x+="&exclude="+n}var y={url:x,width:b(this),valueField:"value",textField:"name",panelHeight:"auto",onBlur:function(){h(s)},onLoadSuccess:function(){var z=s.combobox("getData");var A=s.combobox("panel");if(z.length>10){A.panel("resize",{height:200})}j(s)}};var r=d.extend(w,y);this.combobox(r,v);var l=s.attr("defaultValue");var q=new Array();if(null!=l){q=l.split(",")}s.combobox("setValues",q)}};function j(l){f(l);a(l);e(l)}d.fn.commonCombo.methods={setReadOnly:function(m,l){if(l==true||l=="true"){m.attr("readOnly","true");a(m)}else{m.attr("readOnly","false");c(m)}}};d.fn.commonCombo.parseOptions=function(l){return d.extend({},d.fn.combobox.parseOptions(l),d.fn.combotree.parseOptions(l),{})};d.fn.commonCombo.defaults=d.extend({},d.fn.combobox.defaults,d.fn.combotree.defaults,{})})(jQuery);(function(f){function c(n){var r=n.attr("freeInput");if(r&&r=="true"){return}var l=f(n).combogrid("options")["textField"];var q=f(n).combogrid("getText");var p=f(n).combogrid("getValue");var j=f(n).combogrid("options")["idField"];var k=f(n).combogrid("panel").panel("options").closed;if(q==""||!k){return}var o=f(n).combogrid("grid").datagrid("getData").rows;for(var m=0;m<o.length;m++){if(p==o[m][j]&&q==o[m][l]){return}}f(n).combogrid("clear");f(n).combogrid("grid").datagrid("reload",{})}function h(j){var i=j.attr("textName");if(i){j.next().children()[0].setAttribute("name",i)}}function a(i){var j=i.attr("readOnly");if(j!=null){i.next().children()[0].setAttribute("readOnly","true");f(i.next().children()[0]).css({color:"#aaaaaa"});i.next().children()[1].children[0].disabled="true"}}function b(i){i.next().children()[0].setAttribute("enable_blank",i.attr("enable_blank"));i.next().children()[0].setAttribute("displayName",i.attr("displayName"))}function d(j){var i=j.parent().width();var k=j.css("width");if(k.indexOf("%")!=-1){k=i*parseFloat(k)/100}else{if(k.indexOf("px")!=-1){k=k.replace("px","")}}return k}function e(k){var i=k.attr("defaultValue");var j=k.attr("defaultText");if(!i){return}k.combogrid("setValue",i);if(j){k.combogrid("setText",j);return}}function g(i){var j=i.attr("readOnly");return j!=null}f.fn.commonComboGrid=function(q,o){if(typeof q=="string"){var m=f.fn.commonComboGrid.methods[q];if(m){return m(this,o)}else{return this.combogrid(q,o)}}var l=this;var j=true;var n=l.attr("defaultValue");var p=l.attr("defaultText");var r={width:d(this),onLoadSuccess:function(){if(j||g(l)){e(l);j=false}},onBlur:function(){if(!g(l)){c(l)}},queryParams:{defaultValue:n,defaultText:p},onBeforeLoad:function(){f(l).combogrid("grid").datagrid("options").pageNumber=1;f(l).combogrid("grid").datagrid("getPager").pagination({pageNumber:1})}};var k=f.extend(q,r);this.combogrid(k,o);j=true;var i=this.combogrid("panel");i.panel({onClose:function(){c(l)}});e(l);h(this);a(this);b(this)};f.fn.commonComboGrid.methods=f.extend({},f.fn.combogrid.methods,{});f.fn.commonComboGrid.parseOptions=function(j){var i=f(j);return f.extend({},f.fn.combogrid.parseOptions(j),{})};f.fn.commonComboGrid.defaults=f.extend({},f.fn.combogrid.defaults,{})})(jQuery);(function(b){b.fn.commonGrid=function(g,f){if(typeof g=="string"){var e=b.fn.commonGrid.methods[g];if(e){return e(this,f)}else{return this.datagrid(g,f)}}var d=this;var c={onBeforeLoad:function(j){if(b(this).datagrid("options").pagination){b(this).datagrid("getPager").pagination("options").pageNumber=j.page}else{b.extend(j,{rows:b(this).datagrid("options").pageSize})}var i=a(this);b.extend(j,i)}};var h=b.extend(g,c);this.datagrid(h,f)};function a(e){var g=b(e).datagrid("getColumnFields");var d=b(e).datagrid("getColumnFields",true);var j=d.concat(g);var k=b(e).datagrid("options").hiddenColumns;var l="";var m="";for(var f=0;f<j.length;f++){var h=b(e).datagrid("getColumnOption",j[f]);if(h.type=="local"){continue}if(l!=""){l+=",";m+=","}l+=j[f];m+=h.title}for(var f=0;k&&f<k.length;f++){if(l!=""){l+=","}l+=k[f]}return{cols:l,colNames:m}}b.fn.commonGrid.methods=b.extend({},b.fn.datagrid.methods,{});b.fn.commonGrid.parseOptions=function(d){var c=b(d);return b.extend({},b.fn.datagrid.parseOptions(d),{})};b.fn.commonGrid.defaults=b.extend({},b.fn.datagrid.defaults,{})})(jQuery);(function(d){function f(k){var j=k.attr("textName");if(j){k.next().children()[0].setAttribute("name",j)}}function a(j){var k=j.attr("readOnly");if(k!=null&&k!="false"){j.next().children()[0].setAttribute("readOnly","true");d(j.next().children()[0]).css({color:"#aaaaaa"});j.next().children()[1].children[0].disabled="true"}}function c(j){d(j.next().children()[0]).attr("readOnly","false");d(j.next().children()[0]).css("color","");if(j.next().children()[1]){d(j.next().children()[1].children[0]).removeAttr("disabled")}}function e(j){j.next().children()[0].setAttribute("enable_blank",j.attr("enable_blank"));j.next().children()[0].setAttribute("displayName",j.attr("displayName"))}function b(k){var j=k.parent().width();var l=k.css("width");if(l.indexOf("%")!=-1){l=j*parseFloat(l)/100}else{if(l.indexOf("px")!=-1){l=l.replace("px","")}}return l}function g(m,l){var j=m.attr("defaultValue");var k=m.attr("defaultText");if(!j){return}m.combotree("setValue",j)}function i(j,l){var k=l.attributes.leaf;if(k=="false"){return false}else{return true}}d.fn.remoteComboTree=function(s,r){var o=this;if(typeof s=="string"){var q=d.fn.remoteComboTree.methods[s];if(q){return q(this,r)}else{return this.combotree(s,r)}}var m=s.treeAction;var l=s.textAction;var k=this.attr("exclude");if(k!=null&&k!=""){if(m&&m.indexOf("?")==-1){m+="?"}m+="&exclude="+k}var j,p;first=true;var t={url:m,width:b(this),editable:true,keyHandler:{up:function(){},down:function(){},enter:function(){},query:function(u){p=u;o.combotree("reload",m+"&q="+u)}},onLoadSuccess:function(u,v){if(p){o.combotree("clear");o.next().children()[0].value=p}},onBeforeSelect:function(u){return i(o,u)},onBlur:function(){var u=o.combotree("getValue");if(!u){o.combotree("setValue",u)}}};var n=d.extend(s,t);this.combotree(n,r);g(o);h(o)};function h(j){f(j);a(j);e(j)}d.fn.remoteComboTree.methods={setReadOnly:function(k,j){if(j==true||j=="true"){k.attr("readOnly","true");a(k)}else{k.attr("readOnly","false");c(k)}}};d.fn.remoteComboTree.parseOptions=function(j){return d.extend({},d.fn.combotree.parseOptions(j),{})};d.fn.remoteComboTree.defaults=d.extend({},d.fn.combotree.defaults,{})})(jQuery);