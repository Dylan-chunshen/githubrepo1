var g_path="/js-library/easyui-1.2.1/gov/";var oup_service="gov.adapter.oup.wegov.WegovService";$(function(){load_easyui_gov()});function load_easyui_gov(a){$("select.select-wad-code",a).each(function(b){var c=$(this).attr("tcode");$(this).commonCombo({treeAction:g_path+"select/selectWadTreeAction.jsp?tcode="+c,textAction:g_path+"select/selectWadCodeNameAction.jsp?tcode="+c,selectAction:g_path+"select/selectWadAction.jsp?tcode="+c})});$("select.commonCombo",a).each(function(b){$(this).commonCombo({selectAction:$(this).attr("selectAction")})});$("select.select-remote-wad-code",a).each(function(b){var c=$(this).attr("tcode");$(this).remoteComboTree({treeAction:g_path+"select/remoteSelectWadTreeAction.jsp?tcode="+c,textAction:g_path+"select/remoteSelectWadCodeNameAction.jsp?tcode="+c})});$("select.select-suborg",a).each(function(c){var b=$(this).attr("orgId");if(!b){b=""}$(this).commonCombo({treeAction:g_path+"select/selectOrgTreeAction.jsp?oup_service="+oup_service+"&orgId="+b,textAction:g_path+"select/selectOrgNameAction.jsp?oup_service="+oup_service,selectAction:g_path+"select/selectOrgAction.jsp?oup_service="+oup_service+"&orgId="+b})});$("select.select-demo-code",a).each(function(b){var c=$(this).attr("tcode");$(this).commonCombo({treeAction:g_path+"select/selectDemoDicAction.jsp?tcode="+c,textAction:"",selectAction:g_path+"select/selectDemoDicAction.jsp?tcode="+c})})}function gotoFirstPage(a){a.datagrid("options").pageNumber=1;a.datagrid("getPager").pagination({pageNumber:1})}(function(d){function g(p){var n=p.attr("freeInput");if(n&&n=="true"){return}var o=false;var l=p.combobox("options")["textField"];var q=p.combobox("getText");var k=p.combobox("getData");for(var m=0;m<k.length;m++){if(q==k[m][l]){return}}if(o==false){p.combobox("setText","");p.combobox("setValue","")}}function f(l){var k=l.attr("textName");if(k){l.next().children()[0].setAttribute("name",k)}}function a(k){var l=k.attr("readOnly");if(l!=null&&l!="false"){k.next().children()[0].setAttribute("readOnly","true");d(k.next().children()[0]).css({color:"#aaaaaa"});k.next().children()[1].children[0].disabled="true"}}function c(k){d(k.next().children()[0]).attr("readOnly","false");d(k.next().children()[0]).css("color","");if(k.next().children()[1]){d(k.next().children()[1].children[0]).removeAttr("disabled")}}function e(k){k.next().children()[0].setAttribute("enable_blank",k.attr("enable_blank"));k.next().children()[0].setAttribute("displayName",k.attr("displayName"))}function b(l){var k=l.parent().width();var m=l.css("width");if(m.indexOf("%")!=-1){m=k*parseFloat(m)/100}else{m=parseFloat(m)}return m}function h(n,m){var k=n.attr("defaultValue");var l=n.attr("defaultText");if(!k){return}n.combotree("setValue",k);if(l){n.combotree("setText",l);return}d.ajax({type:"POST",url:m+"&defaultValue="+k,success:function(p){var o=jQuery.trim(p);n.combotree("setText",o);n.attr("defaultText",o)}})}function j(k,m){var l=m.attributes.leaf;if(l=="false"){return false}else{return true}}d.fn.commonCombo=function(t,s){var q=this.attr("tree");var p=this;if(q=="true"){if(typeof t=="string"){var r=d.fn.commonCombo.methods[t];if(r){return r(this,s)}else{return this.combotree(t,s)}}var n=t.treeAction;var m=t.textAction;var l=this.attr("exclude");if(l!=null&&l!=""){if(n&&n.indexOf("?")==-1){n+="?"}n+="&exclude="+l}var k;var v={url:n,width:b(this),onExpand:function(){var w=p.combotree("getValue");if(w==p.attr("defaultValue")){h(p,m)}},onLoadSuccess:function(w,x){if(w==null){h(p,m)}i(p)},onBeforeSelect:function(w){return j(p,w)},onBeforeLoad:function(x,w){if(x){w.queryKey=x.attributes.queryKey}}};var o=d.extend(t,v);this.combotree(o,s)}else{if(typeof t=="string"){var r=d.fn.commonCombo.methods[t];if(r){return r(this,s)}else{return this.combobox(t,s)}}var u=t.selectAction;var l=this.attr("exclude");if(l!=null&&l!=""){if(u.indexOf("?")==-1){u+="?"}u+="&exclude="+l}var v={url:u,width:b(this),valueField:"value",textField:"name",panelHeight:"auto",onBlur:function(){g(p)},onLoadSuccess:function(){var w=p.combobox("getData");var x=p.combobox("panel");if(w.length>10){x.panel("resize",{height:200})}i(p)}};var o=d.extend(t,v);this.combobox(o,s);p.combobox("setValue",p.attr("defaultValue"))}};function i(k){f(k);a(k);e(k)}d.fn.commonCombo.methods={setReadOnly:function(l,k){if(k==true||k=="true"){l.attr("readOnly","true");a(l)}else{l.attr("readOnly","false");c(l)}}};d.fn.commonCombo.parseOptions=function(k){return d.extend({},d.fn.combobox.parseOptions(k),d.fn.combotree.parseOptions(k),{})};d.fn.commonCombo.defaults=d.extend({},d.fn.combobox.defaults,d.fn.combotree.defaults,{})})(jQuery);(function(f){function c(n){var r=n.attr("freeInput");if(r&&r=="true"){return}var l=f(n).combogrid("options")["textField"];var q=f(n).combogrid("getText");var p=f(n).combogrid("getValue");var j=f(n).combogrid("options")["idField"];var k=f(n).combogrid("panel").panel("options").closed;if(q==""||!k){return}var o=f(n).combogrid("grid").datagrid("getData").rows;for(var m=0;m<o.length;m++){if(p==o[m][j]&&q==o[m][l]){return}}f(n).combogrid("clear");f(n).combogrid("grid").datagrid("reload",{})}function h(j){var i=j.attr("textName");if(i){j.next().children()[0].setAttribute("name",i)}}function a(i){var j=i.attr("readOnly");if(j!=null){i.next().children()[0].setAttribute("readOnly","true");f(i.next().children()[0]).css({color:"#aaaaaa"});i.next().children()[1].children[0].disabled="true"}}function b(i){i.next().children()[0].setAttribute("enable_blank",i.attr("enable_blank"));i.next().children()[0].setAttribute("displayName",i.attr("displayName"))}function d(j){var i=j.parent().width();var k=j.css("width");if(k.indexOf("%")!=-1){k=i*parseFloat(k)/100}else{k=parseFloat(k)}return k}function e(k){var i=k.attr("defaultValue");var j=k.attr("defaultText");if(!i){return}k.combogrid("setValue",i);if(j){k.combogrid("setText",j);return}}function g(i){var j=i.attr("readOnly");return j!=null}f.fn.commonComboGrid=function(q,o){if(typeof q=="string"){var m=f.fn.commonComboGrid.methods[q];if(m){return m(this,o)}else{return this.combogrid(q,o)}}var l=this;var j=true;var n=l.attr("defaultValue");var p=l.attr("defaultText");var r={width:d(this),onLoadSuccess:function(){if(j||g(l)){e(l);j=false}},onBlur:function(){if(!g(l)){c(l)}},queryParams:{defaultValue:n,defaultText:p},onBeforeLoad:function(){f(l).combogrid("grid").datagrid("options").pageNumber=1;f(l).combogrid("grid").datagrid("getPager").pagination({pageNumber:1})}};var k=f.extend(q,r);this.combogrid(k,o);j=true;var i=this.combogrid("panel");i.panel({onClose:function(){c(l)}});e(l);h(this);a(this);b(this)};f.fn.commonComboGrid.methods=f.extend({},f.fn.combogrid.methods,{});f.fn.commonComboGrid.parseOptions=function(j){var i=f(j);return f.extend({},f.fn.combogrid.parseOptions(j),{})};f.fn.commonComboGrid.defaults=f.extend({},f.fn.combogrid.defaults,{})})(jQuery);(function(b){b.fn.commonGrid=function(g,f){if(typeof g=="string"){var e=b.fn.commonGrid.methods[g];if(e){return e(this,f)}else{return this.datagrid(g,f)}}var d=this;var c={onBeforeLoad:function(j){if(b(this).datagrid("options").pagination){b(this).datagrid("getPager").pagination("options").pageNumber=j.page}else{b.extend(j,{rows:b(this).datagrid("options").pageSize})}var i=a(this);b.extend(j,i)}};var h=b.extend(g,c);this.datagrid(h,f)};function a(e){var g=b(e).datagrid("getColumnFields");var d=b(e).datagrid("getColumnFields",true);var j=d.concat(g);var k=b(e).datagrid("options").hiddenColumns;var l="";var m="";for(var f=0;f<j.length;f++){var h=b(e).datagrid("getColumnOption",j[f]);if(h.type=="local"){continue}if(l!=""){l+=",";m+=","}l+=j[f];m+=h.title}for(var f=0;k&&f<k.length;f++){if(l!=""){l+=","}l+=k[f]}return{cols:l,colNames:m}}b.fn.commonGrid.methods=b.extend({},b.fn.datagrid.methods,{});b.fn.commonGrid.parseOptions=function(d){var c=b(d);return b.extend({},b.fn.datagrid.parseOptions(d),{})};b.fn.commonGrid.defaults=b.extend({},b.fn.datagrid.defaults,{})})(jQuery);(function(d){function f(k){var j=k.attr("textName");if(j){k.next().children()[0].setAttribute("name",j)}}function a(j){var k=j.attr("readOnly");if(k!=null&&k!="false"){j.next().children()[0].setAttribute("readOnly","true");d(j.next().children()[0]).css({color:"#aaaaaa"});j.next().children()[1].children[0].disabled="true"}}function c(j){d(j.next().children()[0]).attr("readOnly","false");d(j.next().children()[0]).css("color","");if(j.next().children()[1]){d(j.next().children()[1].children[0]).removeAttr("disabled")}}function e(j){j.next().children()[0].setAttribute("enable_blank",j.attr("enable_blank"));j.next().children()[0].setAttribute("displayName",j.attr("displayName"))}function b(k){var j=k.parent().width();var l=k.css("width");if(l.indexOf("%")!=-1){l=j*parseFloat(l)/100}else{l=parseFloat(l)}return l}function g(m,l){var j=m.attr("defaultValue");var k=m.attr("defaultText");if(!j){return}m.combotree("setValue",j)}function i(j,l){var k=l.attributes.leaf;if(k=="false"){return false}else{return true}}d.fn.remoteComboTree=function(s,r){var o=this;if(typeof s=="string"){var q=d.fn.remoteComboTree.methods[s];if(q){return q(this,r)}else{return this.combotree(s,r)}}var m=s.treeAction;var l=s.textAction;var k=this.attr("exclude");if(k!=null&&k!=""){if(m&&m.indexOf("?")==-1){m+="?"}m+="&exclude="+k}var j,p;first=true;var t={url:m,width:b(this),editable:true,keyHandler:{up:function(){},down:function(){},enter:function(){},query:function(u){p=u;o.combotree("reload",m+"&q="+u)}},onLoadSuccess:function(u,v){if(p){o.combotree("clear");o.next().children()[0].value=p}},onBeforeSelect:function(u){return i(o,u)},onBlur:function(){var u=o.combotree("getValue");if(!u){o.combotree("setValue",u)}}};var n=d.extend(s,t);this.combotree(n,r);g(o);h(o)};function h(j){f(j);a(j);e(j)}d.fn.remoteComboTree.methods={setReadOnly:function(k,j){if(j==true||j=="true"){k.attr("readOnly","true");a(k)}else{k.attr("readOnly","false");c(k)}}};d.fn.remoteComboTree.parseOptions=function(j){return d.extend({},d.fn.combotree.parseOptions(j),{})};d.fn.remoteComboTree.defaults=d.extend({},d.fn.combotree.defaults,{})})(jQuery);